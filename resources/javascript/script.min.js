var atlp={};(function(f){var e=window.atlp_data?JSON.parse(atlp_data):{};atlp=f.extend(true,e,atlp);f(document).ready(function(){f("body").on("click",".atlp-likes",function(){var j=f(this);var i=parseInt(f(this).attr("data-post-id"));var l=j.attr("data-single");var h=j.attr("data-plural");var k=f(".atlp-count",j).clone();if(!j.hasClass("atlp-liked")){j.addClass("atlp-liking");g(i,function(m){setTimeout(function(){j.removeClass("atlp-liking");j.addClass("atlp-liked");k.text(b(m));var n=f("<div/>").append(k).html();f(".label",j).html(m===1?l.replace("%s",n):h.replace("%s",n));j.attr("title",c(m,l,h));},1200);});}else{j.addClass("atlp-unliking");a(i,function(m){setTimeout(function(){j.removeClass("atlp-unliking");j.removeClass("atlp-liked");k.text(b(m));var n=f("<div/>").append(k).html();f(".label",j).html(m===1?l.replace("%s",n):h.replace("%s",n));j.attr("title",c(m,l,h));},1200);});}});});atlp.remove_like=a;atlp.add_like=g;function a(h,i){if(h===undefined&&!atlp.post_id){return;}d({post_id:h?h:false,action:atlp.likes.remove_action,nonce:atlp.likes.nonce,success:function(j){if(j&&j.message&&j.message==="success"){if(i){i(j.counter);
}}}});}function g(h,i){if(h===undefined&&!atlp.post_id){return;}d({post_id:h?h:false,action:atlp.likes.add_action,nonce:atlp.likes.nonce,success:function(j){if(j&&j.message&&j.message==="success"){if(i){i(j.counter);}}}});}function d(h){if(!h.action||!h.nonce){if(h.success&&typeof(h.success)==="function"){h.success(response);}return false;}f.ajax({type:"get",dataType:"json",url:atlp.ajax_url,data:{action:h.action,nonce:h.nonce,post_id:h.post_id!==undefined?parseInt(h.post_id):atlp.post_id},success:function(i){console.log(i);if(i&&i.message&&i.message==="success"){if(h.success&&typeof(h.success)==="function"){h.success(i);}}else{return false;}},error:function(i,k,j){}});}function b(l){var k=1000;var h=["","K","M","B"];for(var j=0;l>k;j++){l/=k;}var m=l.toString().split(".");if(m[1]){m[1]=m[1].substring(0,1);}return m.join(".")+h[j];}function c(k,m,j){var h=k.toLocaleString("en-US");var l=j;if(k===1){l=m;}var i=l.replace("%s",h);return i;}})(jQuery);